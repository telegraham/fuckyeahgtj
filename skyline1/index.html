<html>
<head>
<style type="text/css">

element {
}

</style>
<link rel="stylesheet" href="skyline.css">
<script src="http://ajax.microsoft.com/ajax/jquery/jquery-1.4.1.min.js" type="text/javascript"></script> 
<script type="text/javascript">
 /* <![CDATA[ */
 
  
function makeWindows(settingsParam)
{
	var defaultSettings = 
		{
			
		};
		
	var settings = {};	
		
	$.extend(settings, defaultSettings, settingsParam);
	
		var index = randomInteger(0, AllBuildings.length - 1);
		var building = AllBuildings[index];
		
		var buildingHeight = building.height();
		var buildingWidth = building.width();
		
		windowsForThisBuilding = buildingHeight * buildingWidth / 100;		
		
		//for (var i = 0 ; i <= windowsForThisBuilding; i++)
		//{
		var windows = building.children(".window");
		if (windows.length < windowsForThisBuilding * 10)
		{
			var div = $("<div class='window'></div>");
			
			var width = Math.abs((randomInteger(-1,1) + randomInteger(-1,1) + randomInteger(-1,1)) * 2);
			var top = randomInteger(1, buildingHeight - 1);
			var left = randomInteger(0, buildingWidth - 1);
			
			var overhang = left + width - buildingWidth;
			if (overhang > 0)
				width = width - overhang;
			
			div.css({ 
					"top" : -top,
					"left" :  left,
					"width" : width
					//"background-color" : randomLightColor()
				});
				
			var reflection = $("<div class='window reflection'></div>");
			
			reflection.css({ 
					"top" : top,
					"left" :  left,
					//"background-color" : randomLightColor()
				});
				
			building.append(reflection);	
			building.append(div);	
		
		//}
		}
		else
		{
			AllBuildings.splice(index, 1);
		}

} 
 
function randomLightColor()
{
	return "#" 	+ randomInteger(192, 255).toString(16)
				+ randomInteger(192, 255).toString(16)
				+ randomInteger(192, 255).toString(16);
}
function randomInteger(min, max)
{
	return Math.floor(Math.random() * (max - min + 1)) + min;
}
 
function random(min, max)
{
	return Math.random() * (max - min) + min;
}
 
function makeWindowsLoop()
{
	makeWindows();
	setTimeout("makeWindowsLoop()", 10);
}



$(function() {

	AllBuildings = new Array();
	j = 0;
	
	$(".building").each(function(index)
	{
		var building = $(this);
	
		var buildingHeight = building.height();
		var buildingWidth = building.width();
		
		windowsForThisBuilding = buildingHeight * buildingWidth / 100;
		
		for (var i = 0 ; i <= windowsForThisBuilding; i++)
			AllBuildings.push(building);
	});

	var screen = $("#screen");
	
	screen.fadeTo(10000, 0, function(){ screen.remove() });

	makeWindowsLoop();
});
 
/* ]]> */
</script>
</head>
<body>
<div id="screen"></div>
<div id="skyline">
<div id="water">
<div id="b1" class="building"></div>
<div id="b2" class="building"></div>
<div id="b3" class="building"></div>
<div id="b4" class="building"> <!-- sears -->
	<div class="mask"></div>
	<div id="searsLeftAntenna" class="antenna">
		<div id="blinker"></div>
	</div>
	<div id="searsRightAntenna" class="antenna">
		<div id="blinker"></div>	
	</div>
</div>
<div id="b5" class="building"></div>
<div id="b6" class="building"></div>
<div id="b7" class="building"></div>
<div id="b8" class="building"></div>
<div id="b9" class="building"></div>

<div id="b10" class="building"></div>
<div id="b11" class="building"></div>
<div id="b12" class="building"></div>
<div id="b13" class="building"></div>
<div id="b14" class="building"></div>
<div id="b15" class="building"></div>
<div id="b16" class="building"></div>
<div id="b17" class="building">
	<img src="vagina.gif" class="mask"/>
</div>
<div id="b18" class="building"></div>
<div id="b19" class="building"></div>

<div id="b20" class="building"></div>
<div id="b21" class="building">
	<img src="pencil.gif" class="mask"/>
	<div id="pencilAntenna" class="antenna"></div>
</div>
<div id="b22" class="building"></div>
<div id="b23" class="building"></div>
<div id="b24" class="building"></div>
<div id="b25" class="building"></div>
<div id="b26" class="building"></div>
<div id="b27" class="building"></div>
<div id="b28" class="building"></div>
<div id="b29" class="building"></div>

<div id="b30" class="building"></div>
<div id="b31" class="building"></div>
<div id="b32" class="building"></div>
<div id="b33" class="building">
	<img src="hancock.png" class="mask"/>
	<div id="hancockLeftAntenna" class="antenna">
		<div id="blinker"></div>
	</div>
	<div id="hancockRightAntenna" class="antenna">
		<div id="blinker"></div>	
	</div>
</div>
<div id="b34" class="building"></div>
<div id="b35" class="building"></div>
<div id="b36" class="building"></div>
<div id="b37" class="building"></div>
<div id="b38" class="building"></div>
<div id="b39" class="building"></div>
</div>
</div>
</body>
</html>